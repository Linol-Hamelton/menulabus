/* MenuLabus - Optimized */
!function(){let t=0,e=null;const o=document.body.classList.contains("employee-page"),n=document.body.classList.contains("customer_orders-page"),a=document.body.classList.contains("admin-form-container"),r=document.getElementById("cart-total-count");async function c(){e&&e.abort(),e=new AbortController;try{const c=await fetch("/ws-poll.php?t="+t,{signal:e.signal});if(!c.ok)throw new Error("http "+c.status);const d=await c.json();if(d.timestamp>t&&(t=d.timestamp,r&&void 0!==d.cartTotal&&(r.textContent=d.cartTotal),d.orderUpdated))if(o||a)fetch(location.href).then(t=>t.text()).then(t=>{const e=(new DOMParser).parseFromString(t,"text/html").querySelector(".orders-list"),o=document.querySelector(".orders-list");if(e&&o){const t=document.querySelector(".tab-btn.active")?.dataset.tab;if(o.outerHTML=e.outerHTML,t){const e=document.querySelector(`.tab-btn[data-tab="${t}"]`),o=document.getElementById(t);e&&e.classList.add("active"),o&&o.classList.add("active")}}s()});else if(n){const t=document.querySelectorAll(".order-item");let e=!1;t.forEach(t=>{const o=parseInt(t.dataset.orderId);d.changedOrderIds&&d.changedOrderIds.includes(o)&&(e=!0)}),(e||d.changedOrderIds&&0===d.changedOrderIds.length)&&fetch(location.href).then(t=>t.text()).then(t=>{const e=(new DOMParser).parseFromString(t,"text/html").querySelector(".account-sections"),o=document.querySelector(".account-sections");if(e&&o){const t=document.querySelector(".tab-btn.active")?.dataset.tab;if(o.outerHTML=e.outerHTML,t){const e=document.querySelector(`.tab-btn[data-tab="${t}"]`),o=document.getElementById(t);e&&e.classList.add("active"),o&&o.classList.add("active")}}s()})}}catch(t){}finally{const t=document.hasFocus()?15e3:6e4;setTimeout(c,t)}}function s(){document.querySelectorAll(".status-btn, .status-btn-r").forEach(t=>{t.replaceWith(t.cloneNode(!0)),document.querySelector(`[data-order-id="${t.dataset.orderId}"]`).addEventListener("click",function(){this.dataset.action,this.dataset.orderId,this.dataset.currentStatus})}),document.querySelectorAll(".repeat-order-form").forEach(t=>{t.addEventListener("submit",function(t){t.preventDefault();const e=this.dataset.orderId;repeatOrder(e)})}),document.querySelectorAll("[data-toggle-order]").forEach(t=>{t.addEventListener("click",function(){this.parentElement.classList.toggle("expanded")})})}window.addEventListener("load",function(){c(),s()})}();